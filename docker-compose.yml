version: "3.7"

services:  
    client:
        container_name: client
        build: 
            context: ./client
            dockerfile: ./Dockerfile
        ports:
            - "3000:3000"
        volumes: 
            - ./client:/app
        depends_on:
            - api


    api:
        container_name: api
        build: 
            context: ./api
            dockerfile: ./Dockerfile
        ports:
            - "8888:8888"
        volumes: 
            - ./pg-api:/app
        depends_on:
            - db

    db:
        image: postgres:12
        container_name: postgres
        environment:
            - POSTGRES_USER=postgres
            - POSTGRES_PASSWORD=postgres
        ports:
            - "5432:5432"
        volumes:
            - postgresql:/var/lib/postgresql
            - postgresql_data:/var/lib/postgresql/data

volumes:
    postgresql:
    postgresql_data:
    


    

            