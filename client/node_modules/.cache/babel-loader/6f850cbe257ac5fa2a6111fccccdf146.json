{"ast":null,"code":"var _jsxFileName = \"/Users/chenxi/Vector/client/src/components/Content.js\";\nimport React, { Component } from 'react';\nimport DragItem from './DragItem';\nimport { DndProvider } from 'react-dnd';\nimport Backend from 'react-dnd-html5-backend';\n\nclass Content extends Component {\n  constructor(props) {\n    super(props);\n    this.updateData = this.updateData.bind(this);\n    this.callbackOrderChange = this.callbackOrderChange.bind(this);\n    this.state = {\n      dataset: []\n    };\n  }\n\n  componentDidMount() {\n    console.log(\"Component mounted successfully!\");\n    var request = new Request('http://localhost:' + this.props.port + '/banks', {\n      method: 'GET',\n      mode: 'cors',\n      cache: 'no-cache'\n    });\n    fetch(request).then(response => response.json()).then(data => {\n      console.log(data);\n      this.setState({\n        dataset: data\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  updateData(id, index) {\n    let newdata = {\n      pos: index\n    };\n    var request = new Request('http://localhost:' + this.props.port + '/banks/' + id, {\n      method: 'PUT',\n      mode: 'cors',\n      headers: new Headers({\n        'Content-Type': 'application/json'\n      }),\n      body: JSON.stringify(newdata)\n    });\n    fetch(request).then(response => response.json()).then(data => {\n      console.log(data);\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  callbackOrderChange(newGrid) {\n    console.log(newGrid);\n    newGrid.forEach((card, i) => {\n      card.position = i;\n      this.updateData(card.id, i);\n    });\n    this.setState({\n      dataset: newGrid\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(DndProvider, {\n      backend: Backend,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(DragItem, {\n      content: this.state.dataset,\n      onOrderChange: this.callbackOrderChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default Content;","map":{"version":3,"sources":["/Users/chenxi/Vector/client/src/components/Content.js"],"names":["React","Component","DragItem","DndProvider","Backend","Content","constructor","props","updateData","bind","callbackOrderChange","state","dataset","componentDidMount","console","log","request","Request","port","method","mode","cache","fetch","then","response","json","data","setState","catch","err","id","index","newdata","pos","headers","Headers","body","JSON","stringify","newGrid","forEach","card","i","position","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport DragItem from './DragItem';\nimport { DndProvider } from 'react-dnd';\nimport Backend from 'react-dnd-html5-backend';\n\nclass Content extends Component {\n    constructor(props) {\n        super(props);\n        this.updateData = this.updateData.bind(this);\n        this.callbackOrderChange = this.callbackOrderChange.bind(this);\n        this.state = {\n            dataset: []\n        }\n    }\n\n    componentDidMount() {\n        console.log(\"Component mounted successfully!\")\n        var request = new Request('http://localhost:' + this.props.port+'/banks', {\n            method: 'GET',\n            mode: 'cors',\n            cache: 'no-cache'\n        }); \n        fetch(request)\n        .then((response) => response.json())\n        .then((data) => {\n            console.log(data)\n            this.setState({\n                dataset: data\n            })\n        })         \n        .catch((err) => {\n            console.log(err);\n        });\n    }\n\n    updateData(id, index) {\n        let newdata = {pos: index}\n        var request = new Request('http://localhost:' + this.props.port+'/banks/' + id, {\n            method: 'PUT',\n            mode: 'cors',\n            headers: new Headers({ 'Content-Type': 'application/json' }),\n            body: JSON.stringify(newdata)\n        });     \n        fetch(request)\n        .then((response) => response.json())\n        .then((data) => {\n            console.log(data)\n        })\n        .catch((err) => {\n            console.log(err);\n        });\n    }\n\n\n    callbackOrderChange(newGrid) {\n        console.log(newGrid)\n        newGrid.forEach((card,i) => {\n            card.position = i;\n            this.updateData(card.id, i)\n        })\n        this.setState({\n            dataset: newGrid\n        })\n    }\n\n    render() {\n        return (\n            <div>   \n                <DndProvider backend={Backend}>\n                    <DragItem content={this.state.dataset} onOrderChange={this.callbackOrderChange}/>\n                </DndProvider>              \n            </div>    \n        )\n    }\n}\n\nexport default Content"]},"metadata":{},"sourceType":"module"}